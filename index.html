<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculatrice</title>
    <link rel="stylesheet" href="style.css">
    <style>
        
    </style>
</head>
<body>
    <div class="contener">
        <div class="ecran"></div>
        <div class="touche">
            <button data-key="8" class="buton">C</button>
            <button data-key="53" class="buton">(</button>     
            <button data-key="219" class="buton">)</button>
            <button data-key="111" class="buton">/</button>
            <button data-key="103" class="buton">7</button>
            <button data-key="104" class="buton">8</button>
            <button data-key="105" class="buton">9</button>
            <button data-key="106" class="buton">*</button>
            <button data-key="100" class="buton">4</button>
            <button data-key="101" class="buton">5</button>
            <button data-key="102" class="buton">6</button>
            <button data-key="109" class="buton">-</button>
            <button data-key="97" class="buton">1</button>
            <button data-key="98" class="buton">2</button>
            <button data-key="99" class="buton">3</button>
            <button data-key="107" class="buton">+</button>
            <button data-key="96" class="buton">0</button>
            <button data-key="110" class="buton">.</button>
            <button data-key="13" class="buton">=</button>
        </div>
    </div>
    <script>
        const ecran = document.querySelector('.ecran');
        const touches = [...document.querySelectorAll('.buton')];
        const listekeycode = touches.map(touche => touche.getAttribute('data-key'));

        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('buton')) {
                const valeur = e.target.getAttribute('data-key');
                calculer(valeur);
            }
        });

        document.addEventListener('keydown', (e) => {
            const valeur = e.keyCode.toString();
            calculer(valeur);
        });

        function calculer(valeur) {
            if (listekeycode.includes(valeur)) {
                switch (valeur) {
                    case '8':
                        ecran.textContent = '';
                        break;
                    case '13':
                        try {
                            const calcul = eval(ecran.textContent);
                            ecran.textContent = calcul;
                        } catch (error) {
                            ecran.textContent = 'Erreur';
                            setTimeout(() => ecran.textContent = '', 2000);
                        }
                        break;
                    default:
                        const indexKeycode = listekeycode.indexOf(valeur);
                        const touche = touches[indexKeycode];
                        ecran.textContent += touche.textContent;
                }
            }
        }
    </script>
</body>
</html>